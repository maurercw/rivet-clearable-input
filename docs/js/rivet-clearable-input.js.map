{"version":3,"file":"rivet-clearable-input.js","sources":["../../src/js/rivet-clearable-input.js"],"sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], function () {\n      return factory(root);\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.ClearableInput = factory(root);\n  }\n})(typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : this, function (window) {\n\n  'use strict';\n\n  var CLEARABLE_ATTR = 'data-clearable';\n\n  var CLOSE_ICON = '<span class=\"rvt-sr-only\">Clear input</span>' +\n                   '<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">' +\n                        '<g fill=\"currentColor\">' +\n                            '<path d=\"M8,0a8,8,0,1,0,8,8A8,8,0,0,0,8,0ZM8,14a6,6,0,1,1,6-6A6,6,0,0,1,8,14Z\"/>' +\n                            '<path d=\"M10.83,5.17a1,1,0,0,0-1.41,0L8,6.59,6.59,5.17A1,1,0,0,0,5.17,6.59L6.59,8,5.17,9.41a1,1,0,1,0,1.41,1.41L8,9.41l1.41,1.41a1,1,0,0,0,1.41-1.41L9.41,8l1.41-1.41A1,1,0,0,0,10.83,5.17Z\"/>' +\n                        '</g>' +\n                    '</svg>';\n\n  /**\n     * Creates a new custom event and stores a reference\n     * to the element's ID in the custom\n     * event's options \"detail\" property.\n     *\n     * More here:\n     * https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events#Adding_custom_data_%E2%80%93_CustomEvent()\n     *\n     */\n    var _fireCustomEvent = function(element, eventName) {\n      var event = new CustomEvent(eventName, { bubbles: true,\n        detail: {name: function() {\n             return element.id;\n        }}});\n\n      // Dispatch the event\n      element.dispatchEvent(event);\n    }\n\n    /**\n      * Remove css classes from the element, clear the text, hide the button, fire the event\n      */\n    var clearInput = function(element) {\n        element.classList.remove(\"hasData\");\n        element.value = '';\n        element.focus();\n\n        //Hide the button\n        var clearButton = createOrFindButton(element);\n        clearButton.style.display = \"none\";\n\n        _fireCustomEvent(element, 'inputCleared');\n    }\n\n    /**\n     * Event handler for the \"close\" button\n     */\n    var _handleClick = function(event) {\n        var clearButton = event.target;\n        if (clearButton.classList.contains(\"buttonX\")) {\n            var inputId = clearButton.getAttribute(CLEARABLE_ATTR);\n            clearInput(document.getElementById(inputId));\n        }\n\n    }\n\n    /**\n     * Event handler for input being entered into the text box\n     */\n    var _handleInput = function(event) {\n        var clearableInput = event.target;\n        if (clearableInput.classList.contains(\"rvt-clearable-input\")) {\n            var clearButton = createOrFindButton(clearableInput);\n            //If we have content, show the button, otherwise, hide it\n            if (clearableInput.value.length > 0) {\n                clearableInput.classList.add(\"hasData\");\n                clearButton.style.display = \"block\";\n            } else {\n                clearableInput.classList.remove(\"hasData\");\n                clearButton.style.display = \"none\";\n            }\n        }\n    }\n\n    /**\n     * Create a new button, or return the element if it already exists\n     */\n    var createOrFindButton = function(inputElement) {\n        var newButtonId = \"button_\" + inputElement.id;\n        //Make sure it doesn't exist already\n        var button = document.getElementById(newButtonId);\n\n        if (!button) {\n            button = document.createElement(\"button\");\n            button.type = \"button\";\n            button.setAttribute(CLEARABLE_ATTR, inputElement.id);\n            button.classList.add(\"buttonX\");\n            button.innerHTML = CLOSE_ICON;\n            button.id = newButtonId;\n            inputElement.parentNode.insertBefore(button, inputElement.nextSibling);\n        }\n        return button;\n    }\n\n    /**\n      * Adds all the event listeners to the input element(s)\n      */\n    var init = function(context) {\n        // Optional element to bind the event listeners to\n        if (context === undefined) {\n            context = document;\n        }\n\n        context.addEventListener('click', _handleClick, false);\n        context.addEventListener('input', _handleInput, false);\n  }\n\n  /**\n   * Return public APIs\n   */\n  return {\n    init: init,\n    clearInput: clearInput\n  }\n});"],"names":["root","factory","define","amd","exports","module","ClearableInput","global","window","this","CLEARABLE_ATTR","CLOSE_ICON","_fireCustomEvent","element","eventName","event","CustomEvent","bubbles","detail","name","id","dispatchEvent","clearInput","classList","remove","value","focus","clearButton","createOrFindButton","style","display","_handleClick","target","contains","inputId","getAttribute","document","getElementById","_handleInput","clearableInput","length","add","inputElement","newButtonId","button","createElement","type","setAttribute","innerHTML","parentNode","insertBefore","nextSibling","init","context","undefined","addEventListener"],"mappings":"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"}